window.DeepDive=function(e){this.project_id=e,this._checkDebugSession()},DeepDive.prototype={sendData:function(e,t){var i=new URLSearchParams(e).toString(),r="https://collect.backend.deep-dive.cloud/?event_type="+encodeURIComponent(t)+"&"+i+"&project_id="+encodeURIComponent(this.project_id)+"&_="+new Date().getTime();new Image().src=r},pageview:function(){var e=this._getCommonData();e=this._mergeObjects(e,this._getParameters()),e=this._mergeObjects(e,{device_type:this._getDeviceType(),screen_resolution:this._getScreenResolution(),browser:this._getBrowserInfo()}),this.sendData(e,"pageview")},customEvent:function(e,t){var i=this._mergeObjects(this._getCommonData(),{name:e,params:JSON.stringify(t)});this.sendData(i,"custom_event")},viewItem:function(e){var t=this._mergeObjects(this._getCommonData(),{items:JSON.stringify(e)});this.sendData(t,"view_item")},addToCart:function(e,t,i){var r=this._mergeObjects(this._getCommonData(),{items:JSON.stringify(e),value:t,currency:i});this.sendData(r,"add_to_cart")},checkout:function(e,t,i){var r=this._mergeObjects(this._getCommonData(),{items:JSON.stringify(e),value:t,currency:i});this.sendData(r,"checkout")},purchase:function(e,t,i,r,n,s){var a=this._mergeObjects(this._getCommonData(),{items:JSON.stringify(e),value:t,currency:i,tax:r,shipping:n,transaction_id:s});this.sendData(a,"purchase")},_checkDebugSession:function(){var e=new URLSearchParams(window.location.search).get("debug_id");e&&this._isValidUUID(e)&&sessionStorage.setItem("debug_id",e)},_isValidUUID:function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},_generateUUID:function(){var e=new Date().getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)})},_getStorageItem:function(e){try{return localStorage.getItem(e)||this._getCookie(e)}catch(t){return this._getCookie(e)}},_setStorageItem:function(e,t,i){try{localStorage.setItem(e,t)}catch(r){}this._createCookie(e,t,i)},_createCookie:function(e,t,i){var r="";if(i){var n=new Date;n.setTime(n.getTime()+864e5*i),r="; expires="+n.toUTCString()}document.cookie=e+"="+(t||"")+r+"; path=/; Secure; SameSite=Strict"},_getCookie:function(e){var t=("; "+document.cookie).split("; "+e+"=");return 2===t.length?t.pop().split(";").shift():""},_getUserId:function(){var e=this._getStorageItem("dd_uid");return e||(e=this._generateUUID(),this._setStorageItem("dd_uid",e,365)),e},_getSessionId:function(){var e=this._getStorageItem("dd_sid"),t=new Date().getTime();if(!e)return this._createSession(t);var i=e.split("_"),r=i[0];return t-parseInt(i[1],10)>18e5?this._createSession(t):(this._setStorageItem("dd_sid",r+"_"+t,1/48),r)},_createSession:function(e){var t=this._generateUUID();return this._setStorageItem("dd_sid",t+"_"+e,1/48),t},_getParameters:function(){var e=new URLSearchParams(window.location.search);return["utm_source","utm_medium","utm_campaign","utm_id","utm_term","utm_content"].reduce(function(t,i){var r=e.get(i);return null!==r&&(t[i]=r),t},{})},_getDeviceType:function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;return e>992?"desktop":e>768?"tablet":"mobile"},_getScreenResolution:function(){return window.screen.width+"x"+window.screen.height},_getBrowserInfo:function(){var e=navigator.userAgent,t={Firefox:/Firefox/,Opera:/Opera|OPR/,Chrome:/Chrome/,Safari:/Safari/,IE:/MSIE|Trident/};for(var i in t)if(t[i].test(e))return i;return"undefined"},_getCommonData:function(){var e={user_id:this._getUserId(),session_id:this._getSessionId(),timestamp:new Date().toISOString(),page_url:window.location.href,page_title:document.title,referrer_url:document.referrer||"direct",language_code:navigator.language};try{var t=sessionStorage.getItem("debug_id");t&&(e.debug_id=t)}catch(i){}return e},_mergeObjects:function(e,t){return Object.assign({},e,t)}};